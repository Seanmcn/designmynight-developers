<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-gb">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <title>Booking API - DMN developer documentation</title>
    <meta name="generator" content="Hugo 0.30.2" />

    
    <meta name="description" content="Developer documentation for DesignMyNight">
    
    <link rel="canonical" href="https://developers.designmynight.com/booking-api/">
    
    <meta name="author" content="DesignMyNight Tech Team">
    

    <meta property="og:url" content="https://developers.designmynight.com/booking-api/">
    <meta property="og:title" content="DMN developer documentation">
    <meta property="og:image" content="https://developers.designmynight.com/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="DMN developer documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://developers.designmynight.com/images/favicon.png">
    <link rel="icon" type="image/x-icon" href="https://developers.designmynight.com/images/favicon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://developers.designmynight.com/fonts/icon.eot?52m981');
        src: url('https://developers.designmynight.com/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://developers.designmynight.com/fonts/icon.woff?52m981')
               format('woff'),
             url('https://developers.designmynight.com/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://developers.designmynight.com/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/application.css">
    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/styles.css">
    <link rel="stylesheet" href="https://developers.designmynight.com/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu%20Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>
    
    
    <script src="https://developers.designmynight.com/javascripts/modernizr.js"></script>

  </head>
  <body class="palette-primary-teal palette-accent-deep purple">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Booking API
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/designmynight/dmn-developers" title="@designmynight/dmn-developers on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://developers.designmynight.com/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://developers.designmynight.com/images/logo.png">
        </div>
      
      <div class="name">
        <strong>DMN developer documentation <span class="version">1.1.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Introduction" href="https://developers.designmynight.com/">
	
	Introduction
</a>

  
  
</li>



<li>
  
    



<a  title="Booking widget" href="https://developers.designmynight.com/booking-widget/">
	
	Booking widget
</a>

  
  
</li>



<li>
  
    



<a  title="Ticket widget" href="https://developers.designmynight.com/ticket-widget/">
	
	Ticket widget
</a>

  
  
</li>



<li>
  
    



<a  title="" href="https://developers.designmynight.com/">
	
	
</a>

  
  
</li>



<li>
  
    



<a  title="API Basics" href="https://developers.designmynight.com/api-basics/">
	
	API Basics
</a>

  
  
</li>



<li>
  
    



<a class="current" title="Booking API" href="https://developers.designmynight.com/booking-api/">
	
	Booking API
</a>


<ul id="scrollspy">
</ul>
  
  
</li>



<li>
  
    



<a  title="Bookings search" href="https://developers.designmynight.com/bookings-search/">
	
	Bookings search
</a>

  
  
</li>



<li>
  
    



<a  title="Users API" href="https://developers.designmynight.com/users-api/">
	
	Users API
</a>

  
  
</li>



<li>
  
    



<a  title="Offers API" href="https://developers.designmynight.com/offers-api/">
	
	Offers API
</a>

  
  
</li>



<li>
  
    



<a  title="Venue Groups API" href="https://developers.designmynight.com/venue-groups/">
	
	Venue Groups API
</a>

  
  
</li>



<li>
  
    



<a  title="   " href="https://developers.designmynight.com/">
	
	   
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Faqs</span>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="Booking widget faqs" href="https://developers.designmynight.com/faqs/booking-widget-faqs/">
	
	Booking widget faqs
</a>

  
      
        
        



<a  title="Customising 2nd iframe" href="https://developers.designmynight.com/faqs/customising-2nd-iframe/">
	
	Customising 2nd iframe
</a>

  
      
        
        



<a  title="Customising email templates" href="https://developers.designmynight.com/faqs/customising-email-templates/">
	
	Customising email templates
</a>

  
      
        
        



<a  title="General enquiry form" href="https://developers.designmynight.com/faqs/general-enquiry-form/">
	
	General enquiry form
</a>

  
      
        
        



<a  title="Tracking" href="https://developers.designmynight.com/faqs/tracking/">
	
	Tracking
</a>

  
      
    </ul>
  </li>
  
</li>

        </ul>
        

        
        <hr>
        <span class="section">&#9829; DesignMyNight Tech Team</span>        
        
        <ul>
          

          
          <li>
            <a href="https://github.com/designmynight/dmn-developers" target="_blank" title="@designmynight/dmn-developers on GitHub">
              @designmynight/dmn-developers on GitHub
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Booking API </h1>

			

<div class="admonition note">
<p class="admonition-title">Before you begin</p>
<p>Refer to the <a href="https://developers.designmynight.com/api-basics">API Basics</a> section to ensure you are familiar with the essentials of how to interact with the API.</p>
</div>

<p>The DesignMyNight Booking API can be used to check venue availability and create a booking, and is suitable for clients who would prefer to implement their own booking process rather than using the <a href="https://developers.designmynight.com/booking-widget">Booking Widget</a>.</p>

<h2 id="overview">Overview</h2>

<p>Creating a booking through the API consists of two stages:</p>

<ol>
<li>Use the <code>venues</code> API endpoint to check the types of booking that are available and the restrictions for this booking type, and to build up the details of a booking that would be accepted</li>
<li>a) Submit the booking using the <code>bookings</code> API endpoint, <em>or</em>
<br>b) Redirect the customer to the DesignMyNight website to complete their booking</li>
</ol>

<h2 id="checking-availability">Checking availability</h2>

<p>The <code>venues</code> API endpoint provides you with all that you need to present valid booking choices to your users and then check the venue&rsquo;s availability based on those choices. You can post to this endpoint multiple times until you have a booking that would be able to be accepted.</p>

<p>Start by sending a POST request using the ID of the venue you wish to book:</p>

<pre><code class="language-bash">$ curl -X POST https://api.designmynight.com/v4/venues/552435790df6902b7256f237/booking-availability
</code></pre>

<p>You&rsquo;ll get a response like this:</p>

<pre><code class="language-json">{
  &quot;payload&quot;: {
    &quot;valid&quot;: false,
    &quot;validation&quot;: {
      &quot;type&quot;: {...},
      &quot;num_people&quot;: {...},
      &quot;date&quot;: {...},
      &quot;time&quot;: {...},
      &quot;duration&quot;: {...}
    },
    &quot;action&quot;: &quot;reject&quot;,
    &quot;depositRequired&quot;: false,
    &quot;preordersAvailable&quot;: false,
    &quot;bookingDetails&quot;:{
      &quot;venue_id&quot;: &quot;552435790df6902b7256f237&quot;,
      &quot;venue_group&quot;: &quot;5524371d0df690ad7156f2ea&quot;
    }
  },
  &quot;status&quot;: 200,
  &quot;requestTime&quot;: &quot;2016-04-29T10:06:01&quot;,
  &quot;responseTime&quot;: &quot;2016-04-29T10:06:01&quot;,
  &quot;statusText&quot;: &quot;OK&quot;,
  &quot;url&quot;: &quot;/v4/venues/552435790df6902b7256f237/booking-availability&quot;,
  &quot;method&quot;: &quot;POST&quot;,
  &quot;params&quot;: []
}
</code></pre>

<p>You can use the responses from this endpoint to construct a valid booking in whatever order you prefer. Each time you post to it, the response will let you know whether the given booking details are valid, and it will contain details on how to guide your user towards selecting details for a valid booking.</p>

<h3 id="booking-format">Booking format</h3>

<p>A valid booking should contain the following fields:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>type</code></td>
<td>The ID of the booking type as a string</td>
</tr>

<tr>
<td><code>num_people</code></td>
<td>The number of guests in the booking as an integer</td>
</tr>

<tr>
<td><code>date</code></td>
<td>The date of the booking, in the format YYYY-MM-DD</td>
</tr>

<tr>
<td><code>time</code></td>
<td>The time of the booking in 24-hour format, eg 19:00</td>
</tr>

<tr>
<td><code>duration</code></td>
<td>The duration of the booking in hours as a decimal, eg 1.5</td>
</tr>
</tbody>
</table>

<h3 id="validation">Validation</h3>

<p>The <code>validation</code> key in the returned JSON contains validation details for each required field. For each field, you get an object that consists of the following keys:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>valid</td>
<td><code>Boolean</code>: whether the field is valid for the given booking</td>
</tr>

<tr>
<td>errors</td>
<td><code>Error&lt;&gt;</code> If the field is not valid, contains an array of error details</td>
</tr>

<tr>
<td>suggestedValues</td>
<td><code>Array</code> of potential values for the field</td>
</tr>

<tr>
<td>rules:</td>
<td><code>Object</code> describing the validation rules for the field</td>
</tr>
</tbody>
</table>

<h3 id="suggested-values">Suggested values</h3>

<p>With every request, the <code>suggestedValues</code> object within a field&rsquo;s validation details will contain further details of potential values for that field, given the current booking details. For example, if you post a booking type but no other details, the <code>time</code> field will contain possible times for that booking type on any date. If you then post a booking type and a date, the <code>time</code> field will contain suggested values for a booking of that type on that date.</p>

<p>Suggested values contains an array of objects, each describing a potential value for the field. The object contains the following keys:</p>

<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>value</code></td>
<td><code>object</code> or <code>string</code> with the suggested value of the field</td>
</tr>

<tr>
<td><code>valid</code></td>
<td><code>boolean</code> describing whether this value would be valid given the current booking details</td>
</tr>

<tr>
<td><code>message</code></td>
<td><code>string</code> providing further information on the field&rsquo;s restrictions</td>
</tr>

<tr>
<td><code>action</code></td>
<td><code>string</code> (only for <code>time</code>) describing the how the booking would be handled after submission - see <a href="#submitting-the-booking">Submitting the booking</a></td>
</tr>

<tr>
<td><code>offers</code></td>
<td><code>array</code> (only with <code>getOffers=true</code>) See <a href="https://developers.designmynight.com/offers-api/#offers-in-booking-availability">Offers in Booking Availability</a></td>
</tr>
</tbody>
</table>

<h3 id="validation-rules">Validation rules</h3>

<p>If returned within the <code>validation</code> object, the <code>rules</code> object contains further details on the validation rules that apply for the given field. For example, the <code>num_people</code> field will return a <code>rules</code> object containing a <code>min</code> and a <code>max</code> permitted for this field. These values may be <code>null</code> if no min or max is set.</p>

<h2 id="submitting-the-booking">Submitting the booking</h2>

<p>Once you have booking details that pass the validation, the <code>action</code> key in the availability response will contain a string letting you know what will happen if the booking is submitted. The action may be one of the following:</p>

<table>
<thead>
<tr>
<th>Action</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>accept</td>
<td>The booking will be accepted and automatically confirmed</td>
</tr>

<tr>
<td>enquire</td>
<td>The booking will be processed as an enquiry, and the customer will have to wait for confirmation</td>
</tr>

<tr>
<td>may_enquire</td>
<td>The venue appears to have no availability, but the customer may choose to submit an enquiry anyway</td>
</tr>

<tr>
<td>reject</td>
<td>The booking cannot be accommodated</td>
</tr>
</tbody>
</table>

<h3 id="submitting-through-the-api-or-through-a-web-redirect">Submitting through the API or through a web redirect</h3>

<p>If a booking is valid to be submitted, the response from the <code>booking-availability</code> endpoint will contain a <code>next</code> key, with an object containing web and API URLs that may be used to submit the booking.</p>

<p><strong>Note</strong>: some bookings require additional details from the customer before they can be completed - for example, some bookings will require a payment to be made in order to secure the booking, and others provide the ability to choose and pay for pre-order items before submitting the booking.</p>

<p>Where these additional details apply, you will not be able to submit the booking through the API, and will instead need to redirect the customer to the given URL in order to complete their booking. Where this applies you can supply a return URL for the customer to be redirected to after their booking has been submitted.</p>

<h3 id="submitting-through-the-api">Submitting through the API</h3>

<p>If an API URL is provided for in the &lsquo;next&rsquo; object, you will need to construct a booking object that contains all of the fields in the <code>bookingDetails</code> object of the successful <code>booking-details</code> API response, as well as the following details:</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td><code>source</code></td>
<td>(optional) <code>string</code> representing the source of the booking: should be &lsquo;partner&rsquo; for any booking from a venue&rsquo;s own app.</td>
</tr>

<tr>
<td><code>first_name</code></td>
<td><code>string</code> the customer&rsquo;s first name</td>
</tr>

<tr>
<td><code>last_name</code></td>
<td><code>string</code> the customer&rsquo;s last name</td>
</tr>

<tr>
<td><code>email</code></td>
<td><code>string</code> the customer&rsquo;s email address</td>
</tr>

<tr>
<td><code>phone</code></td>
<td><code>string</code> the customer&rsquo;s phone number</td>
</tr>

<tr>
<td><code>dob</code></td>
<td>(optional) <code>string</code> the customer&rsquo;s date of birth, in the format YYYY-MM-DD</td>
</tr>

<tr>
<td><code>newsletter_signup</code></td>
<td>(optional) <code>boolean</code> whether the customer opted in to marketing communications</td>
</tr>
</tbody>
</table>

<h3 id="submitting-through-the-web">Submitting through the web</h3>

<p>If you want or need to submit a booking through the web URL, you should direct the customer to the <strong>web</strong> part of the <code>next</code> object, optionally appending a <code>return_url</code> field containing a URL that the customer should be directed to once their booking has been submitted.</p>

<p>If this is used, the following details of the submitted booking will be appended to the return URL, and you should handle displaying the confirmation to the customer.</p>

<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>reference</td>
<td>The booking reference</td>
</tr>

<tr>
<td>status</td>
<td>The status of the booking: &lsquo;complete&rsquo; for confirmed bookings; otherwise this is an enquiry</td>
</tr>

<tr>
<td><code>first_name</code></td>
<td><code>string</code> the customer&rsquo;s first name</td>
</tr>

<tr>
<td><code>last_name</code></td>
<td><code>string</code> the customer&rsquo;s last name</td>
</tr>

<tr>
<td><code>email</code></td>
<td><code>string</code> the customer&rsquo;s email address</td>
</tr>
</tbody>
</table>

			
			<aside class="copyright" role="note">
				
				&copy; 2017 DesignMyNight &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">
					Material
				</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://developers.designmynight.com/ticket-widget/" title="Ticket widget">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Ticket widget
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="https://developers.designmynight.com/" title="Introduction">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Introduction
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>




			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="https://developers.designmynight.com/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(headers.length > 0) {
        for(var i = 0; i < headers.length; i++) {
          var li = document.createElement("li");
          li.setAttribute("class", "anchor");

          var a  = document.createElement("a");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", headers[i].innerHTML);
          a.innerHTML = headers[i].innerHTML;
          
          li.appendChild(a)
          scrollspy.appendChild(li);
        }
      } else {
        scrollspy.parentElement.removeChild(scrollspy)
      }
      

      /* Add permanent link next to the headers */
      var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

      for(var i = 0; i < headers.length; i++) {
          var a = document.createElement("a");
          a.setAttribute("class", "headerlink");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", "Permanent link")
          a.innerHTML = "#";
          headers[i].appendChild(a);
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-12385609-13', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>