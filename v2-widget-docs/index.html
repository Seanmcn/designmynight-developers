<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-gb">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <title> - DMN developer documentation</title>
    <meta name="generator" content="Hugo 0.22.1" />

    
    <meta name="description" content="Developer documentation for DesignMyNight">
    
    <link rel="canonical" href="http://developers.designmynight.com/v2-widget-docs/">
    
    <meta name="author" content="DesignMyNight Tech Team">
    

    <meta property="og:url" content="http://developers.designmynight.com/v2-widget-docs/">
    <meta property="og:title" content="DMN developer documentation">
    <meta property="og:image" content="http://developers.designmynight.com/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="DMN developer documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://developers.designmynight.com/images/favicon.png">
    <link rel="icon" type="image/x-icon" href="http://developers.designmynight.com/images/favicon.png">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://developers.designmynight.com/fonts/icon.eot?52m981');
        src: url('http://developers.designmynight.com/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('http://developers.designmynight.com/fonts/icon.woff?52m981')
               format('woff'),
             url('http://developers.designmynight.com/fonts/icon.ttf?52m981')
               format('truetype'),
             url('http://developers.designmynight.com/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://developers.designmynight.com/stylesheets/application.css">
    <link rel="stylesheet" href="http://developers.designmynight.com/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://developers.designmynight.com/stylesheets/styles.css">
    <link rel="stylesheet" href="http://developers.designmynight.com/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu%20Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>
    
    
    <script src="http://developers.designmynight.com/javascripts/modernizr.js"></script>

  </head>
  <body class="palette-primary-teal palette-accent-deep purple">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/designmynight/dmn-developers" title="@designmynight/dmn-developers on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="http://developers.designmynight.com/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://developers.designmynight.com/images/logo.png">
        </div>
      
      <div class="name">
        <strong>DMN developer documentation <span class="version">1.1.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a  title="Introduction" href="http://developers.designmynight.com/">
	
	Introduction
</a>

  
  
</li>



<li>
  
    



<a  title="    " href="http://developers.designmynight.com/">
	
	    
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Tonic</span>
      
    
    

    <ul>
      
        
        



<a  title="Ticket widget" href="http://developers.designmynight.com/tonic/ticket-widget/">
	
	Ticket widget
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title="     " href="http://developers.designmynight.com/">
	
	     
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Collins</span>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="Updating Email Settings" href="http://developers.designmynight.com/collins/updating-email-settings/">
	
	Updating Email Settings
</a>

  
      
        
        



<a  title="Collins Booking Widget" href="http://developers.designmynight.com/collins/booking-widget/">
	
	Collins Booking Widget
</a>

  
      
        
        



<a  title="Customising 2nd Iframe" href="http://developers.designmynight.com/collins/customising-2nd-iframe/">
	
	Customising 2nd Iframe
</a>

  
      
        
        



<a  title="Booking URLs" href="http://developers.designmynight.com/collins/booking-url/">
	
	Booking URLs
</a>

  
      
        
        



<a  title="General Enquiry Form" href="http://developers.designmynight.com/collins/general-enquiry-form/">
	
	General Enquiry Form
</a>

  
      
        
        



<a  title="Customising Email Templates" href="http://developers.designmynight.com/collins/customising-email-templates/">
	
	Customising Email Templates
</a>

  
      
        
        



<a  title="Taking Bookings from Google" href="http://developers.designmynight.com/collins/taking-bookings-from-google/">
	
	Taking Bookings from Google
</a>

  
      
        
        



<a  title="Tracking" href="http://developers.designmynight.com/collins/tracking/">
	
	Tracking
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title=" " href="http://developers.designmynight.com/">
	
	 
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Api</span>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="API Basics" href="http://developers.designmynight.com/api/api-basics/">
	
	API Basics
</a>

  
      
        
        



<a  title="Booking API" href="http://developers.designmynight.com/api/booking-api/">
	
	Booking API
</a>

  
      
        
        



<a  title="Bookings search" href="http://developers.designmynight.com/api/bookings-search/">
	
	Bookings search
</a>

  
      
        
        



<a  title="Users API" href="http://developers.designmynight.com/api/users-api/">
	
	Users API
</a>

  
      
        
        



<a  title="Offers API" href="http://developers.designmynight.com/api/offers-api/">
	
	Offers API
</a>

  
      
        
        



<a  title="Venue Groups API" href="http://developers.designmynight.com/api/venue-groups/">
	
	Venue Groups API
</a>

  
      
        
        



<a  title="Event Guests API" href="http://developers.designmynight.com/api/event-guests-api/">
	
	Event Guests API
</a>

  
      
        
        



<a  title="API FAQs" href="http://developers.designmynight.com/api/api-faqs/">
	
	API FAQs
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title="        " href="http://developers.designmynight.com/">
	
	        
</a>

  
  
</li>



<li>
  
  <li>
    

    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      <span class="section">Epos-Crm-Integrations</span>
      
    
      
    
      
    
      
    
      
    
    

    <ul>
      
        
        



<a  title="Zonal EPOS Integration" href="http://developers.designmynight.com/epos-crm-integrations/zonal-epos-integration/">
	
	Zonal EPOS Integration
</a>

  
      
        
        



<a  title="IBS EPOS Integration" href="http://developers.designmynight.com/epos-crm-integrations/ibs-epos-integration/">
	
	IBS EPOS Integration
</a>

  
      
        
        



<a  title="CRM Integration" href="http://developers.designmynight.com/epos-crm-integrations/crm-integration/">
	
	CRM Integration
</a>

  
      
    </ul>
  </li>
  
</li>



<li>
  
    



<a  title="          " href="http://developers.designmynight.com/">
	
	          
</a>

  
  
</li>

        </ul>
        

        
        <hr>
        <span class="section">&#9829; DesignMyNight Tech Team</span>        
        
        <ul>
          

          
          <li>
            <a href="https://github.com/designmynight/dmn-developers" target="_blank" title="@designmynight/dmn-developers on GitHub">
              @designmynight/dmn-developers on GitHub
            </a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1> </h1>

			

<h1 id="booking-widget-documentation">Booking Widget Documentation</h1>

<h1 id="introduction">Introduction</h1>

<p>The <code>BookingFormHelper</code> class is attached to <code>window.DMN</code>, and provides you with methods for interacting with any widgets on a page independently.</p>

<p><code>window.DMN.BookingFormHelper.widgets</code> will return an array of <code>Widget</code> objects - one for each widget placed on the page.</p>

<p>The <code>Widget</code> object contains the methods listed below which can be used for interacting with a single widget.</p>

<p>When only one widget is used on a page, you can easily get the <code>Widget</code> object with the following code:</p>

<pre><code class="language-javascript">var widget = window.DMN.BookingFormHelper.widgets[0];
</code></pre>

<h1 id="reference-docs">Reference Docs</h1>

<h2 id="setting-and-getting-booking-details">Setting and Getting Booking Details</h2>

<p>The following methods can be used to set the booking details, or see what booking details have been selected by the user before they submit the booking. Setting booking details using these methods will <strong>not</strong> advance the widget to the next stage - see the <a href="#controlling-the-active-stage">Controlling the active stage</a> for instructions on how to advance to other stages.</p>

<h3 id="getselectablevenueids-string"><code>getSelectableVenueIds(): string[]</code></h3>

<p>Returns an array of venue IDs which the user can choose from. These venues would have been specified when the widget was installed.</p>

<h3 id="getselectablebookingtypeids-string"><code>getSelectableBookingTypeIds(): string[]</code></h3>

<p>Returns an array of booking type IDs for the selected venue. A venue must be selected (<code>setVenueById()</code>) before running this.</p>

<h3 id="setvenuebyid-venueid"><code>setVenueById(venueId)</code></h3>

<p>Sets the venue which the booking will be made for. The venue ID is a required parameter, and must be one of the IDs specified when the widget was installed. You can use the <a href="#getSelectableVenueIds()"><code>getSelectableVenueIds()</code></a> method to get an array of venue IDs you can use.</p>

<h3 id="setnumberofguests-number"><code>setNumberOfGuests(number)</code></h3>

<p>Sets the number of guests for the booking. The user will still have the ability to modify this. The parameter is required and should be an integer.</p>

<h3 id="setdate-date"><code>setDate(date)</code></h3>

<p>Sets the date the booking will be made for. The user will still have the ability to modify this. The parameter is required, and should be a javascript <code>Date</code> object. Only the date segment is used - the time part will be disregarded.</p>

<h3 id="settypebyid-typeid"><code>setTypeById(typeId)</code></h3>

<p>Sets the booking type. The user will still have the ability to modify this. The parameter is required, and must be one of the type IDs for the selected venue. An array of selectable type IDs can be found by using <code>getSelectableBookingTypeIds()</code></p>

<h2 id="setting-the-user-details">Setting the user details</h2>

<p>Setting the user details programatically means that their details will already be prefilled by the time they get to the final Details stage.</p>

<h3 id="setemailaddress-emailaddress"><code>setEmailAddress (emailAddress)</code></h3>

<p>Sets the email address of the user. The parameter is required and should be a string.</p>

<h3 id="setfirstname-firstname"><code>setFirstName (firstName)</code></h3>

<p>Sets the first name of the user. The parameter is required and should be a string.</p>

<h3 id="setlastname-lastname"><code>setLastName (lastName)</code></h3>

<p>Sets the last name of the user. The parameter is required and should be a string.</p>

<h3 id="setdateofbirth-date-month-year"><code>setDateOfBirth (date, month, year)</code></h3>

<p>Sets the date of birth of the user. This information will only be sent to Collins if the <em>Birthday</em> field is not set as <em>hidden</em> in Collins. All three parameters are required, and they should all be integers. Here are some examples of the expected format:</p>

<pre><code class="language-javascript">widget.setDateOfBirth(13, 1, 1995); // 13th January 1995
widget.setDateOfBirth(1, 12, 1990); // 1st December 1990
widget.setDateOfBirth(13, 4, 2000); // 13th April 2000
</code></pre>

<h3 id="setmobilenumber-mobilenumber"><code>setMobileNumber (mobileNumber)</code></h3>

<p>Sets the user&rsquo;s mobile number. The parameter is required and should be a string.</p>

<h3 id="setnotes-notes"><code>setNotes (notes)</code></h3>

<p>Sets the booking notes. The parameter is required and should be a string.</p>

<h2 id="controlling-the-active-stage">Controlling the active stage</h2>

<p>The following methods can be used to control which stage the widget is currently on. By default, the widget will launch:</p>

<ul>
<li>The <em>Venue Selection</em> stage if there are more than 1 venue to select from</li>
<li>&mdash; <strong>OR</strong> &mdash;</li>
<li>The <em>Date/Number of Guests</em> stage if there is only 1 venue to select from</li>
</ul>

<h3 id="gotovenuestage"><code>goToVenueStage()</code></h3>

<p>Jumps to the Venue selection stage.</p>

<h3 id="gotodateandguestselectionstage"><code>goToDateAndGuestSelectionStage()</code></h3>

<p>Jumps to the Date/Number of Guests stage.</p>

<h3 id="gototypeselectionstage"><code>goToTypeSelectionStage()</code></h3>

<p>Jumps to the Booking Type selection stage.</p>

<h3 id="gototimeselectionstage"><code>goToTimeSelectionStage()</code></h3>

<p>Jumps to the Time selection stage.</p>

<h3 id="gotodetailsstage"><code>goToDetailsStage()</code></h3>

<p>Jumps to the Details stage, where a user enters their information.</p>

<h1 id="examples">Examples</h1>

<h2 id="pre-selecting-booking-information">Pre-selecting booking information</h2>

<h3 id="valentines-day-example">Valentines Day example</h3>

<p>In this example, we&rsquo;re going to be placing the widget on a Valentines Day page. The widget will provide a convenient way for guests to make a booking for:</p>

<ul>
<li><em>Cocktail Bar</em> venue (Venue ID: 123456)</li>
<li>2 people</li>
<li>14th February 2019</li>
</ul>

<p>We&rsquo;ll use the Javascript API to preset this information, meaning all the user needs to specify is their desired booking type, preferred time and their contact details. When the page loads, the widget will be displaying the Booking Type selection stage.</p>

<pre><code class="language-javascript">const helper = window.DMN.BookingFormHelper;
const widgets = helper.widgets; // [Widget]

// We'll assume there's only one widget on the page for this example.
const widget = widgets[0];

const desiredVenueId = '123456';
const desiredNumGuests = 6;
const desiredDate = new Date('2019-02-14T00:00:00');

widget.setVenueById(desiredVenueId)
    .setNumberOfGuests(desiredNumGuests)
    .setDate(desiredDate)
    .goToTypeSelectionStage();
</code></pre>

<h3 id="prefilling-notes">Prefilling Notes</h3>

<p>In this example, we&rsquo;re going to be prefilling the Notes section to contain a custom string. Bear in mind that the notes can still be viewed and modified by the customer as they&rsquo;re placing their booking.</p>

<pre><code class="language-javascript">const helper = window.DMN.BookingFormHelper;
const widgets = helper.widgets; // [Widget]

// We'll assume there's only one widget on the page for this example.
const widget = widgets[0];

const notes = &quot;Booking placed from my website&quot;;

widget.setNotes(notes)
</code></pre>

			
			<aside class="copyright" role="note">
				
				&copy; 2018 DesignMyNight &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">
					Material
				</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
  </div>

  <div class="next">
  
      <a href="http://developers.designmynight.com/testing/testing/" title="">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>




			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="http://developers.designmynight.com/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(headers.length > 0) {
        for(var i = 0; i < headers.length; i++) {
          var li = document.createElement("li");
          li.setAttribute("class", "anchor");

          var a  = document.createElement("a");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", headers[i].innerHTML);
          a.innerHTML = headers[i].innerHTML;
          
          li.appendChild(a)
          scrollspy.appendChild(li);
        }
      } else {
        scrollspy.parentElement.removeChild(scrollspy)
      }
      

      /* Add permanent link next to the headers */
      var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

      for(var i = 0; i < headers.length; i++) {
          var a = document.createElement("a");
          a.setAttribute("class", "headerlink");
          a.setAttribute("href", "#" + headers[i].id);
          a.setAttribute("title", "Permanent link")
          a.innerHTML = "#";
          headers[i].appendChild(a);
      }
    </script>

    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', '//www.google-analytics.com/analytics.js', 'ga');
         
        ga('create', 'UA-12385609-13', 'auto');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
         
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
         
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    

    <script src="http://developers.designmynight.com/javascripts/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>